@model List<BasketVM>
@{ 
    
}
<div class="page-content py-5">

    <section>
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-12 sidebar mt-8 mt-lg-0">
                    <div class="shadow-sm p-5">
                        <div class="widget widget-categories mb-4 pb-4 border-bottom">
                            <form method="post" id="filterForm" asp-controller="Product" asp-action="ProductFilter">
                                <label>Qiymət aralığı</label>
                                <div class="row mb-4">

                                    <div class="col-lg-4">
                                        <input class="form-control" type="text" id="priceFrom" name="PriceFrom" style="width: 100px;" min="0" placeholder="min" value="@ViewBag.PriceFrom" />
                                    </div>
                                    <div class="col-lg-4 offset-lg-2">

                                        <input class="form-control" type="text" id="priceTo"  name="PriceTo" style="width: 100px;" min="0" placeholder="max" value="@ViewBag.PriceTo" />
                                    </div>

                                </div>



                                <div class="form-group">
                                    <label>Kateqoriyanı seçin</label>
                                    <select class="form-control" name="CategoryId" id="Category">
                                        <option value="">Hamısı</option>
                                        @foreach (var item in ViewBag.Categories)
                                        {
                                            @if (ViewBag.CategoryId == item.Id)
                                            {
                                                <option value="@item.Id" selected>@item.Name</option>
                                            }
                                            else
                                            {
                                                <option value="@item.Id">@item.Name</option>
                                            }
                                        }
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label>Brendi seçin</label>
                                    <select class="form-control" name="BrandId" id="Brand">
                                        <option value="">Hamısı</option>
                                        @foreach (var item in ViewBag.Brands)
                                        {
                                            @if (ViewBag.BrandId == item.Id)
                                            {
                                                <option value="@item.Id" selected>@item.Name</option>
                                            }
                                            else
                                            {
                                                <option value="@item.Id">@item.Name</option>
                                            }
                                        }
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Mexanizmi seçin</label>
                                    <select class="form-control" name="MechanismId" id="Mechanism">
                                        <option value="">Hamısı</option>
                                        @foreach (var item in ViewBag.Mechanisms)
                                        {
                                            @if (ViewBag.MechanismId == item.Id)
                                            {
                                                <option value="@item.Id" selected>@item.Name</option>
                                            }
                                            else
                                            {
                                                <option value="@item.Id">@item.Name</option>
                                            }
                                        }
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Sudan muhafizə səviyyəsini seçin</label>
                                    <select class="form-control" name="WaterProtectionId" id="WaterProtection">
                                        <option value="">Hamısı</option>
                                        @foreach (var item in ViewBag.WaterProtection)
                                        {
                                            @if (ViewBag.WaterProtectionId == item.Id)
                                            {
                                                <option value="@item.Id" selected>@item.Name</option>
                                            }
                                            else
                                            {
                                                <option value="@item.Id">@item.Name</option>
                                            }
                                        }
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Qolbaq tipini seçin</label>
                                    <select class="form-control" name="BandTypeId" id="BandType">
                                        <option value="">Hamısı</option>
                                        @foreach (var item in ViewBag.BandTypes)
                                        {
                                            @if (ViewBag.BandTypesId == item.Id)
                                            {
                                                <option value="@item.Id" selected>@item.Name</option>
                                            }
                                            else
                                            {
                                                <option value="@item.Id">@item.Name</option>
                                            }
                                        }
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Korpus qalınlığnı seçin </label>
                                    <select class="form-control" name="CaseThickId" id="CaseThick">
                                        <option value="">Hamısı</option>
                                        @foreach (var item in ViewBag.CaseThicks)
                                        {
                                            @if (ViewBag.CaseThicksId == item.Id)
                                            {
                                                <option value="@item.Id" selected>@item.Name</option>
                                            }
                                            else
                                            {
                                                <option value="@item.Id">@item.Name</option>
                                            }
                                        }
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Şüşə materialını seçin</label>
                                    <select class="form-control" name="GlassTypeId" id="GlassType">
                                        <option value="">Hamısı</option>
                                        @foreach (var item in ViewBag.GlassTypes)
                                        {
                                            @if (ViewBag.GlassTypesId == item.Id)
                                            {
                                                <option value="@item.Id" selected>@item.Name</option>
                                            }
                                            else
                                            {
                                                <option value="@item.Id">@item.Name</option>
                                            }
                                        }
                                    </select>
                                </div>

                                <button type="submit" value="tesdqile" id="tesdiq" class="btn btn-success">
                                    Axtar
                                </button>


                            </form>
                            <form asp-controller="Product" asp-action="ResetFilter">
                                <button type="submit"  id="reset" class="btn btn-danger">
                                    Təmizlə
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-lg-9 col-md-12 order-lg-1">
                    <div class="row mb-4 align-items-center">
                        <div class="col-md-5 mb-3 mb-md-0">
                            <span class="text-muted">
                                Showing 1 to 18 of 20
                                total
                            </span>
                        </div>
                        <div class="col-md-7 d-flex align-items-center justify-content-md-end">
                            <div class="sort-filter ml-2 d-flex align-items-center">
                                <select class="custom-select" id="inputGroupSelect02">
                                    <option selected>Filtrlə</option>
                                    <option value="1">Ən yeni</option>
                                    <option value="2">Ən çox satılan</option>
                                    <option value="3">A-dan Z-yə</option>
                                    <option value="3">Z-dən A-ya</option>
                                    <option value="3">Qiymət(artan sıra)</option>
                                    <option value="3">Qiymət(azalan sıra)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="load">
                        <img src="~/assets/images/Snake.gif" />
                    </div>
                    <div class="row productArea">

                @foreach (BasketVM product in Model)
                {
            <div class="col-lg-3 col-md-4">
                <div class="item mt-2">
                    <div class="card product-card">
                        <button class="btn-wishlist btn-sm" type="button" data-toggle="tooltip"
                                data-placement="left" title="Add to wishlist" id="addToWishlist">
                            <i class="fas fa-heart"></i>

                        </button>
                        <input type="hidden" value="@product.Id" class="inputHidden" />

                        <a class="card-img d-block" asp-controller="Product" asp-action="ProductDetails" asp-route-id="@product.Id">
                            <img class="card-img-top card-img-back" src="~/assets/images/@product.Image"
                                 alt="image">
                        </a>
                        <div class="card-info">
                            <div class="card-body">
                                <div class="product-title">
                                    <a class="link-title"
                                       asp-controller="Product" asp-action="ProductDetails" asp-route-id="@product.Id">@product.Model</a>
                                </div>
                                <div class="mt-1">
                                    @if (product.Discount > 0)
                                    {
                                        <span class="product-price">
                                            <del class="text-muted">₼@product.Price</del>
                                            ₼@(product.Price-(product.Price*product.Discount/100))
                                        </span>
                                    }
                                    else
                                    {
                                        <span class="product-price">
                                            <del class="text-muted"></del>
                                            ₼@product.Price
                                        </span>
                                    }

                                </div>
                            </div>
                            <div class="card-footer bg-transparent border-0">
                                <div class="product-link d-flex align-items-center justify-content-center">
                                    <button class="btn btn-compare" data-toggle="tooltip" data-placement="top"
                                            title="Compare" type="button">
                                        <i class="fas fa-random"></i>
                                    </button>
                                    <button class="btn-cart btn btn-primary" type="button" data-toggle="tooltip" data-placement="top"
                                            title="AddBasket" id="addToBasket">
                                        <i class="fas fa-shopping-cart mr-1 "></i>
                                    </button>
                                    <input class="basketProduct" type="hidden" value="@product.Id" />

                                    <button class="btn btn-view " data-toggle="tooltip" data-placement="top"
                                            title="Quick View">
                                        <input class="quickProduct" type="hidden" value="@product.Id" />
                                        <span data-target="#quick-view" data-toggle="modal">
                                            <i class="fas fa-eye"></i>
                                        </span>

                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

                }

                    </div>
                    <nav aria-label="..." class="justify-content-center">
                        <ul class="pagination pagination-sm justify-content-center">
                            @for (int i = 1; i <= ViewBag.PageCount; i++)
                            {
                                if (i == ViewBag.Page)
                                {
                                    <li class="page-item disabled">
                                        <a class="page-link" href="#">@i</a>
                                    </li>
                                }
                                else
                                {
                                    <li class="page-item">
                                        <a class="page-link" asp-controller="Product" asp-action="Index" asp-route-page="@i">@i</a>
                                    </li>
                                }
                            }
                        </ul>
                    </nav>
                </div>

            </div>
        </div>
    </section>

</div>

@section Scripts{ 
@*<script>
    $(document).on('click', '#tesdiq', function (e) {
        e.preventDefault();
        let priceFrom = $('#priceFrom').val();
        let priceTo = $('#priceTo').val();
        let category = $('#Category').val();
        let brand = $('#Brand').val();
        let mechanism = $('#Mechanism').val();
        let waterProtection = $('#WaterProtection').val();
        let bandType = $('#BandType').val();
        let glassType = $('#GlassType').val();
        let caseThick = $('#CaseThick').val();
        $(this).prop('disabled', true);
        $.ajax({
            url: '/Product/ProductFilter',
            data: {
                PriceFrom: priceFrom,
                PriceTo: priceTo,
                CategoryId: category,
                BrandId: brand,
                MechanismId: mechanism,
                WaterProtectionId: waterProtection,
                BandTypeId: bandType,
                GlassTypeId: glassType,
                CaseThick: caseThick
            },
            type: 'Get',
            success: function (res) {
                $('.load').addClass('d-flex');
                $('.productArea').html("");
                setTimeout(function () {
                    $('.productArea').append(res);
                    $('.load').removeClass('d-flex');
                }, 2000)
                console.log(res);

            }
        })
        
    })

    $('#reset').click(function () {
        $('#filterForm').trigger("reset");
    })

    $('.form-control').change(function () {
        $("#tesdiq").prop('disabled', false);
    })
</script>*@
}
